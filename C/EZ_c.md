## 1. C 语言概述

- 起源与地位
  - 1972 年由丹尼斯·里奇在贝尔实验室开发
  - 底层能力强，广泛用于系统编程、嵌入式开发
- 学习前的思考
  - 为什么现在还要学 C？
  - C 与其他语言（如 Python、Java）的区别在哪儿？

## 2. 环境搭建

- 编译器选择

  - GCC（Linux／WSL／Mac）、Clang、MSVC（Windows）

- 开发工具

  - 编辑器：VS Code、Vim、Emacs
  - IDE：Code::Blocks、CLion

- 第一个程序

  ```c
  #include <stdio.h>
  
  int main(void) {
      printf("Hello, C!\n");
      return 0;
  }
  ```

- 检查点：

  - `#include` 与头文件的作用？
  - 返回值 `0` 表示什么？

## 3. 基本语法

- **注释**
  - 单行：`// ...`
  - 多行：`/* ... */`
- **标识符**
  - 由字母、数字、下划线组成，不能以数字开头
- **分号（`;`）**：每条语句结束必须有分号
- **代码块**：用 `{}` 包裹

## 4. 数据类型与变量

- 基本类型：`char`、`int`、`float`、`double`

- 修饰符：`signed`、`unsigned`、`short`、`long`

- 枚举类型：`enum Color { RED, GREEN, BLUE };`

- **思考**：

  - `int` 在不同平台的字节数是否相同？

- 变量声明与初始化

  ```c
  int a;               // 声明
  int b = 10;          // 声明并初始化
  const float PI = 3.14159;  // 常量
  ```

## 5. 运算符

- 算术：`+ - * / %`
- 关系：`== != > < >= <=`
- 逻辑：`&& || !`
- 位运算：`& | ^ << >> ~`
- 赋值：`= += -= *= /= %= <<= >>= &= ^= |=`
- **易错点**：`=`（赋值）与 `==`（比较）混淆

## 6. 控制结构

- 条件语句

  ```c
  if (x > 0) {
      // ...
  } else if (x == 0) {
      // ...
  } else {
      // ...
  }
  ```

- 选择语句

  ```c
  switch (ch) {
      case 'a': // ...
                break;
      default:  // ...
  }
  ```

- 循环

  - `for (int i = 0; i < n; ++i) { ... }`
  - `while (condition) { ... }`
  - `do { ... } while (condition);`

- **陷阱**：

  - 忘记 `break` 导致“穿透”
  - 死循环的常见原因

## 7. 函数

- 声明与定义

  ```c
  // 声明
  int add(int x, int y);
  // 定义
  int add(int x, int y) {
      return x + y;
  }
  ```

- 参数传递

  - 值传递：函数内部修改不影响外部

- 递归

  - 必须有终止条件，否则栈溢出

- **思考**：

  - 是否需要在头文件中声明所有函数？

## 8. 指针

- 基本概念：存储变量地址

  ```c
  int x = 5;
  int *p = &x;   // p 指向 x
  ```

- **常用操作**：

  - 取地址符 `&`、解引用 `*`

- 指针与数组的关系

  - 数组名即指向首元素的常量指针

- 空指针检查：`if (p != NULL)`

- **安全提醒**：

  - 野指针、空指针、悬挂指针带来的崩溃

## 9. 数组与字符串

- 一维数组：`int arr[5];`

- 二维数组：`char mat[3][4];`

- 字符串：以 `'\0'` 结尾的 `char` 数组

  ```c
  char str[] = "Hello";
  ```

- 数组越界的风险

- 字符串函数（`<string.h>`）：`strlen`、`strcpy`、`strcmp`...

## 10. 结构体与共用体

- 结构体

  ```c
  struct Point {
      int x, y;
  };
  ```

- 共用体（union）

  - 节省内存，但只能同时存储一种类型

- 类型别名：`typedef struct Point Point;`

## 11. 动态内存管理

- `malloc`、`calloc`、`realloc`、`free`

  ```c
  int *p = malloc(sizeof(int) * n);
  if (!p) { /* 分配失败处理 */ }
  free(p);
  ```

- **思考**：

  - 为什么要手动管理内存？
  - 漏 `free` 会怎样？内存泄漏、内存碎片

## 12. 文件 I/O

- 打开/关闭：`fopen`、`fclose`
- 读写：`fgetc`、`fgets`、`fputc`、`fputs`、`fread`、`fwrite`
- 定位：`fseek`、`ftell`
- 错误检测：`if (fp == NULL)`

## 13. 预处理器

- 宏：`#define MAX 100`
- 条件编译：`#ifdef`、`#ifndef`、`#endif`
- 文件包含：`#include <...>` 与 `#include "..."` 区别
- **常见误区**：
  - 宏的括号遗漏引发优先级问题
  - 多重包含保护（`#pragma once` 或 “include guard”）

## 14. 调试与工具

- `printf` 打印法
- GDB 调试：断点、单步、查看变量
- 静态分析：`-Wall -Wextra` 警告打开
- **自检**：
  - 是否打开最高级别警告？
  - 是否定期用 Valgrind 检查内存问题？

## 15. 常见错误与陷阱

- 使用未初始化变量
- 忘记检查函数返回值
- 越界访问
- 指针错误操作
- 格式化字符串与参数不匹配
- **培养习惯**：
  - 代码复审（Code Review）
  - 写单元测试

## 16. 进阶主题（前瞻）

- 位域（bit-fields）
- 嵌入式编程下的 C（裸机、RTOS）
- 并发（线程与锁）
- 链表、栈、队列等手工实现
- C11 标准新特性：`_Atomic`、匿名结构体等

------

> **鼓励**：
>  你已经掌握了 C 的核心要点，下一步——动手写项目！实践才是最好的检验。不断提问、验证：为什么这样用？有没有变更更优的写法？保持怀疑，才能真正精通。